(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1489:function(e,t,n){"use strict";n.r(t);var a=n(48),r=n.n(a),o=n(1),i=n.n(o),s=n(44),c=n.n(s),l=(n(219),n(241)),u=n.n(l),d=n(0),m=n.n(d),f=(n(313),n(387)),h=n.n(f),j=(n(247),n(248)),p=n.n(j),y=(n(423),n(206),n(207)),g=n.n(y),v=(n(60),n(54)),b=n.n(v),E=(n(300),n(238)),k=n.n(E),w=n(385),x=k.a.Option,S=h.a.Header,C=function(e){var t=e.onExhentaiDownload,n=e.onEdit,a=e.exhentaiDateSet,r=e.onExhentaiSelectChange,o=e.onExhentaiLoadList,s=Object(d.useState)(),c=i()(s,2),l=c[0],u=c[1];return m.a.createElement(S,{style:{background:"rgba(0, 0, 0, 0)",height:48,position:"relative"}},m.a.createElement(k.a,{style:{position:"absolute",width:160,top:10,left:8},value:l||(a.length?a[0]:""),onChange:function(e){r(e),u(e)}},a.map((function(e){return m.a.createElement(x,{value:e,key:"exhentai-time-stamp-".concat(e)},e)}))),m.a.createElement(b.a,{style:{position:"absolute",left:180,top:10},type:"dashed",onClick:o},"列表"),m.a.createElement(g.a,{onPressEnter:t,style:{position:"absolute",right:80,top:10,width:350}}),m.a.createElement(b.a,{style:{position:"absolute",right:24,top:10},onClick:function(){return n(void 0,!0)}},m.a.createElement(w.a,null)))},O=p.a.SubMenu,z=h.a.Content,T=h.a.Footer,D=h.a.Sider,F=function(e){var t,n,a=e.onMenuClick,r=e.siderSelectedKey,o=e.menuData,i=e.renderContent,s=e.isLocal,c=e.onExhentaiDownload,l=e.onEdit,u=e.exhentaiDateSet,d=e.onExhentaiSelectChange,f=e.onExhentaiLoadList,j=function(e){var t=e.keyPath;a&&a(t)};return m.a.createElement(h.a,{className:"MainPage"},m.a.createElement(D,{theme:"light",collapsible:!0,collapsedWidth:0},m.a.createElement(p.a,{selectedKeys:[r||""],mode:"inline",onClick:j},o&&o.map((function(e){var t=e.key,n=e.title,a=e.children;return a?m.a.createElement(O,{key:t,title:n},a.map((function(e){return m.a.createElement(p.a.Item,{key:e.key},e.value)}))):m.a.createElement(p.a.Item,{key:t},n)})))),m.a.createElement(h.a,null,s&&m.a.createElement(C,{onExhentaiDownload:c,onEdit:l,exhentaiDateSet:u,onExhentaiSelectChange:d,onExhentaiLoadList:f}),(t=s?48:0,n=document.body.clientHeight-90-t,m.a.createElement(z,{style:{marginLeft:8}},m.a.createElement("div",{style:{padding:"8px 16px 8px 8px",background:"#fff",height:n,overflow:"auto"},className:"main-page-content-wrapper"},i&&i()))),m.a.createElement(T,{style:{textAlign:"center"}},m.a.createElement("div",null,"你睡了一下午，醒的时候屋子里黑漆漆、一点声音都没有。抬头望望窗外，天还没完全黑。四处摸了摸，在枕头下找到手机。打开后屏幕亮起，干净，没有一条消息"),m.a.createElement("div",null,"打开电脑，打开 github。pull request 写得很菜，连 core 都在喷你，但忽然就不孤独了"))))},I=(n(388),n(393)),L=n.n(I),M=(n(1370),n(1381)),P=n.n(M),q=n(1487),H=n(382),N=n(380),J=function(e){var t=e.onDelete,n=e.siderSelectedKey,a=e.dataSource,r=e.onEdit,o=e.onListItemClick,i=e.onHide;return m.a.createElement(P.a,{dataSource:"all"===n?a:a.filter((function(e){return e.subType===n})),renderItem:function(e){return m.a.createElement(L.a,{overlay:function(){return m.a.createElement(p.a,null,m.a.createElement(p.a.Item,{key:"add-".concat(e.id),onClick:function(){return r(e,!0)}},"修改"),m.a.createElement(p.a.Item,{key:"hide-".concat(e.id),onClick:function(){return i&&i(e)}},"隐藏"),m.a.createElement(p.a.Item,{key:"delete-".concat(e.id),onClick:function(){return t&&t(e)}},"删除"))},trigger:["contextMenu"],key:"fragment-".concat(e.id)},m.a.createElement(P.a.Item,{className:"list-item",onClick:function(){return o({category:e.category,id:e.id})}},"mapping"===e.category&&m.a.createElement(H.a,{style:{marginRight:10,fontSize:16,color:"#108ee9"}}),"markdown"===e.category&&m.a.createElement(N.a,{style:{marginRight:10,fontSize:16,color:"#87d068"}}),e.type+" - "+e.subType+" - "+e.title,m.a.createElement("div",{style:{float:"right",marginRight:8}},"".concat(Object(q.a)(new Date(e.createTime),"yyyy-MM-dd")," / ").concat(Object(q.a)(new Date(e.modifyTime),"yyyy-MM-dd")))))}})},K=(n(1395),n(1411)),U=n.n(K),V=(n(208),n(211)),R=n.n(V),W=(n(209),n(212)),G=n.n(W),_=(n(1398),n(1401)),A=n.n(_),B=k.a.Option,Q={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},X=!0,Y=function(e){var t=e.visible,n=e.loading,a=e.selectData,o=e.onCancel,s=e.onSubmit,c=e.dataItem,l=void 0===c?{type:"",subType:"",category:"",title:""}:c,u=A.a.useForm(),f=i()(u,1)[0],h=Object(d.useState)(l.type),j=i()(h,2),p=j[0],y=j[1],v=Object(d.useState)(!1),E=i()(v,2),w=E[0],x=E[1],S=function(e){f.setFieldsValue({type:e}),y(e)},C=f.getFieldsValue();return l.id?X?f.setFieldsValue(r()({},C,l)):f.setFieldsValue(r()({},l,C)):X?f.resetFields():f.setFieldsValue(r()({},l,C)),m.a.createElement(U.a,{visible:t,title:"新建文档",footer:null,onCancel:function(){X=!0,y(null),o()}},m.a.createElement(A.a,r()({},Q,{name:"edit-form",form:f,onFinish:function(e){var t=e.type,n=e.subType,a=e.title,r=e.category;s({title:a,category:r,type:t,subType:n},l)},onFinishFailed:function(e){var t=e.errorFields;f.scrollToField(t[0].name),s()},onValuesChange:function(){return X=!1}}),m.a.createElement(A.a.Item,{label:"标题",name:"title",required:!0,rules:[{required:!0,message:"标题不能为空"}]},m.a.createElement(g.a,null)),function(e){return m.a.createElement(A.a.Item,{label:"显示类别",name:"category",required:!0,rules:[{required:!0,message:"显示类别不能为空"}]},e?m.a.createElement(g.a,null):m.a.createElement(k.a,null,m.a.createElement(B,{value:"markdown"},"markdown"),m.a.createElement(B,{value:"mapping"},"mapping")))}(w),m.a.createElement(A.a.Item,{label:"文档类别",name:"type",required:!0,rules:[{required:!0,message:"文档类别不能为空"}]},w?m.a.createElement(g.a,null):m.a.createElement(k.a,{onChange:S},a.map((function(e){return m.a.createElement(B,{value:e.key,key:"type-".concat(e.key)},e.title)})))),m.a.createElement(A.a.Item,{label:"文档子类",name:"subType",required:!0,rules:[{required:!0,message:"文档子类不能为空"}]},w?m.a.createElement(g.a,null):m.a.createElement(k.a,null,a.filter((function(e){return e.key===(p||l.type)})).map((function(e){var t=e.children;return(void 0===t?[]:t).map((function(e){return m.a.createElement(B,{value:e.key,key:e.key},e.value)}))})))),m.a.createElement(A.a.Item,null,m.a.createElement(R.a,null,m.a.createElement(G.a,{span:6,push:3},m.a.createElement(b.a,{onClick:function(){return x(!w)}},"编辑")),m.a.createElement(G.a,{span:12,push:12},m.a.createElement(R.a,{gutter:18},m.a.createElement(G.a,{span:9},m.a.createElement(b.a,{type:"danger",onClick:function(){return f.resetFields()}},"清空")),m.a.createElement(G.a,{span:6},m.a.createElement(b.a,{type:"primary",onClick:function(){return f.submit()},loading:n},"确定"))))))))},Z=(n(301),n(374)),$=n.n(Z),ee=(n(1415),n(1426)),te=n.n(ee),ne=n(1421),ae=n.n(ne),re=function(e){var t=e.onDownload,n=e.wrapperHeight,a=e.item;return m.a.createElement(L.a,{overlay:m.a.createElement(p.a,null,m.a.createElement(p.a.Item,{key:"download",onClick:function(){t({url:a.detailUrl})}},"download")),trigger:["contextMenu"]},m.a.createElement(te.a,{hoverable:!0,style:{height:n/2},onClick:function(){return e=a.detailUrl,void window.open(e);var e}},m.a.createElement("img",{alt:a.name,src:a.thumbnailUrl})))},oe=function(e){var t=e.dataSource,n=e.onDownload,a=e.wrapperHeight;return m.a.createElement(R.a,{gutter:16,style:{width:"100%"}},t.map((function(e){return m.a.createElement(G.a,{span:4,key:e.detailUrl+"-"+e.postTime},m.a.createElement(ae.a,{height:a,once:!0,scrollContainer:".main-page-content-wrapper"},re({onDownload:n,wrapperHeight:a,item:e})))})))},ie=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},se=function(e){return ie(void 0,void 0,void 0,c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("exhentai/download",{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.text()})).then((function(e){return"true"===e&&u.a.success("保存完成")}));case 1:case"end":return t.stop()}}),t)})))},ce=function(e){var t=e.dataSource,n=m.a.createElement($.a,{description:"该页面仅在本地可用"});return m.a.createElement(m.a.Fragment,null,!t.length&&n,m.a.createElement(oe,{dataSource:t,onDownload:se,wrapperHeight:document.body.clientHeight-48-90}))};var le=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},ue=function(e){var t=e.target.value;fetch("exhentai/download",{body:JSON.stringify({url:t}),method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.text()})).then((function(e){return"true"===e&&u.a.success("保存完成")}))},de=function(){fetch("exhentai")},me=function(e){var t=e.category,n=e.id;location.hash="/".concat(t,"/").concat(n)},fe=function(e){return le(void 0,void 0,void 0,c.a.mark((function t(){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))};t.default=function(){var e=Object(d.useState)([]),t=i()(e,2),a=t[0],o=t[1],s=Object(d.useState)([]),l=i()(s,2),f=l[0],h=l[1],j=Object(d.useState)(!1),p=i()(j,2),y=p[0],g=p[1],v=Object(d.useState)(!1),b=i()(v,2),E=b[0],k=b[1],w=Object(d.useState)(),x=i()(w,2),S=x[0],C=x[1],O=Object(d.useState)(!1),z=i()(O,2),T=z[0],D=z[1],I=Object(d.useState)(!1),L=i()(I,2),M=L[0],P=L[1],q=Object(d.useState)([]),H=i()(q,2),N=H[0],K=H[1],U=Object(d.useState)([]),V=i()(U,2),R=V[0],W=V[1],G=Object(d.useState)("all"),_=i()(G,2),A=_[0],B=_[1],Q=Object(d.useState)("all"),X=i()(Q,2),Z=X[0],$=X[1];!function(){var e=Object(d.useState)(document.body.clientWidth),t=i()(e,2)[1],n=Object(d.useState)(document.body.clientHeight),a=i()(n,2)[1];Object(d.useEffect)((function(){var e=function(){t(document.body.clientWidth),a(document.body.clientHeight)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}))}(),Object(d.useEffect)((function(){ee(te),ae(),ne()}),[]);var ee=function(e){fetch("/test").then((function(e){if(e.ok)return e.text();throw new Error})).then((function(){Promise.all([n.e(4),n.e(10)]).then(n.t.bind(null,1486,7)).then((function(e){e.default("http://localhost:9099").on("refresh",(function(){location.reload()}))})),P(!0),e&&e()})).catch()},te=function(){fetch("/exhentai/dateSet").then((function(e){return e.json()})).then((function(e){he(e.length?e[0]:""),K(e)}))},ne=function(){return le(void 0,void 0,void 0,c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./assets/mapping.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,o(n.filter((function(e){return!1!==e.visible})).sort((function(e,t){return t.modifyTime-e.modifyTime})));case 7:case"end":return e.stop()}}),e)})))},ae=function(){return le(void 0,void 0,void 0,c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./assets/sider.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,h(n);case 7:case"end":return e.stop()}}),e)})))},re=function(e){var t=e.id,n=e.category;return le(void 0,void 0,void 0,c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/document/delete",{method:"DELETE",body:JSON.stringify({id:t,category:n}),mode:"cors",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:e.sent?ne():console.error("error with delete");case 7:case"end":return e.stop()}}),e)})))},oe=function(e,t){g(!!t),C(e)},ie=function(e){var t=e.id;return le(void 0,void 0,void 0,c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("document/update",{body:JSON.stringify({id:t}),method:"POST",headers:{"Content-Type":"application/json"}});case 2:u.a.success("隐藏完成");case 3:case"end":return e.stop()}}),e)})))},se=function(){g(!1)},he=function(e){return le(void 0,void 0,void 0,c.a.mark((function t(){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="./assets/exhentai/".concat(e,".json"),t.next=3,fe(n);case 3:a=t.sent,W(a);case 5:case"end":return t.stop()}}),t)})))};return m.a.createElement(m.a.Fragment,null,m.a.createElement(F,{onMenuClick:function(e){B(e[1]),$(e[0]),D(1===e.length&&"ex-hentai-module"===e[0])},menuData:f,onExhentaiDownload:ue,renderContent:function(){return T&&ce?m.a.createElement(ce,{dataSource:R}):m.a.createElement(J,{siderSelectedKey:Z,onListItemClick:me,onDelete:re,dataSource:a,onEdit:oe,onHide:ie})},isLocal:M,exhentaiDateSet:N,onExhentaiSelectChange:he,onEdit:oe,siderOpenKey:A,siderSelectedKey:Z,onExhentaiLoadList:de}),m.a.createElement(Y,{visible:y,selectData:f.filter((function(e){return e.children})),onSubmit:function(e,t){return le(void 0,void 0,void 0,c.a.mark((function n(){var a,o;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e||t){n.next=2;break}return n.abrupt("return");case 2:if(k(!0),!t||!t.id){n.next=10;break}return a=t.id,n.next=7,fetch("document/update",{body:JSON.stringify(r()({},t,e)),method:"POST",headers:{"Content-Type":"application/json"}});case 7:u.a.success("".concat(e.category," 更新完成")),n.next=17;break;case 10:return n.next=12,fetch("document/add",{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}});case 12:return o=n.sent,n.next=15,o.text();case 15:a=n.sent,u.a.success("".concat(e.category," 初始化完成"));case 17:se(),location.hash="/".concat(e.category).concat("markdown"===e.category?"/edit":"","/").concat(a);case 19:case"end":return n.stop()}}),n)})))},onCancel:se,loading:E,dataItem:S}))}},295:function(e,t,n){var a={"./af":70,"./af.js":70,"./ar":71,"./ar-dz":72,"./ar-dz.js":72,"./ar-kw":73,"./ar-kw.js":73,"./ar-ly":74,"./ar-ly.js":74,"./ar-ma":75,"./ar-ma.js":75,"./ar-sa":76,"./ar-sa.js":76,"./ar-tn":77,"./ar-tn.js":77,"./ar.js":71,"./az":78,"./az.js":78,"./be":79,"./be.js":79,"./bg":80,"./bg.js":80,"./bm":81,"./bm.js":81,"./bn":82,"./bn.js":82,"./bo":83,"./bo.js":83,"./br":84,"./br.js":84,"./bs":85,"./bs.js":85,"./ca":86,"./ca.js":86,"./cs":87,"./cs.js":87,"./cv":88,"./cv.js":88,"./cy":89,"./cy.js":89,"./da":90,"./da.js":90,"./de":91,"./de-at":92,"./de-at.js":92,"./de-ch":93,"./de-ch.js":93,"./de.js":91,"./dv":94,"./dv.js":94,"./el":95,"./el.js":95,"./en-SG":96,"./en-SG.js":96,"./en-au":97,"./en-au.js":97,"./en-ca":98,"./en-ca.js":98,"./en-gb":99,"./en-gb.js":99,"./en-ie":100,"./en-ie.js":100,"./en-il":101,"./en-il.js":101,"./en-nz":102,"./en-nz.js":102,"./eo":103,"./eo.js":103,"./es":104,"./es-do":105,"./es-do.js":105,"./es-us":106,"./es-us.js":106,"./es.js":104,"./et":107,"./et.js":107,"./eu":108,"./eu.js":108,"./fa":109,"./fa.js":109,"./fi":110,"./fi.js":110,"./fo":111,"./fo.js":111,"./fr":112,"./fr-ca":113,"./fr-ca.js":113,"./fr-ch":114,"./fr-ch.js":114,"./fr.js":112,"./fy":115,"./fy.js":115,"./ga":116,"./ga.js":116,"./gd":117,"./gd.js":117,"./gl":118,"./gl.js":118,"./gom-latn":119,"./gom-latn.js":119,"./gu":120,"./gu.js":120,"./he":121,"./he.js":121,"./hi":122,"./hi.js":122,"./hr":123,"./hr.js":123,"./hu":124,"./hu.js":124,"./hy-am":125,"./hy-am.js":125,"./id":126,"./id.js":126,"./is":127,"./is.js":127,"./it":128,"./it-ch":129,"./it-ch.js":129,"./it.js":128,"./ja":130,"./ja.js":130,"./jv":131,"./jv.js":131,"./ka":132,"./ka.js":132,"./kk":133,"./kk.js":133,"./km":134,"./km.js":134,"./kn":135,"./kn.js":135,"./ko":136,"./ko.js":136,"./ku":137,"./ku.js":137,"./ky":138,"./ky.js":138,"./lb":139,"./lb.js":139,"./lo":140,"./lo.js":140,"./lt":141,"./lt.js":141,"./lv":142,"./lv.js":142,"./me":143,"./me.js":143,"./mi":144,"./mi.js":144,"./mk":145,"./mk.js":145,"./ml":146,"./ml.js":146,"./mn":147,"./mn.js":147,"./mr":148,"./mr.js":148,"./ms":149,"./ms-my":150,"./ms-my.js":150,"./ms.js":149,"./mt":151,"./mt.js":151,"./my":152,"./my.js":152,"./nb":153,"./nb.js":153,"./ne":154,"./ne.js":154,"./nl":155,"./nl-be":156,"./nl-be.js":156,"./nl.js":155,"./nn":157,"./nn.js":157,"./pa-in":158,"./pa-in.js":158,"./pl":159,"./pl.js":159,"./pt":160,"./pt-br":161,"./pt-br.js":161,"./pt.js":160,"./ro":162,"./ro.js":162,"./ru":163,"./ru.js":163,"./sd":164,"./sd.js":164,"./se":165,"./se.js":165,"./si":166,"./si.js":166,"./sk":167,"./sk.js":167,"./sl":168,"./sl.js":168,"./sq":169,"./sq.js":169,"./sr":170,"./sr-cyrl":171,"./sr-cyrl.js":171,"./sr.js":170,"./ss":172,"./ss.js":172,"./sv":173,"./sv.js":173,"./sw":174,"./sw.js":174,"./ta":175,"./ta.js":175,"./te":176,"./te.js":176,"./tet":177,"./tet.js":177,"./tg":178,"./tg.js":178,"./th":179,"./th.js":179,"./tl-ph":180,"./tl-ph.js":180,"./tlh":181,"./tlh.js":181,"./tr":182,"./tr.js":182,"./tzl":183,"./tzl.js":183,"./tzm":184,"./tzm-latn":185,"./tzm-latn.js":185,"./tzm.js":184,"./ug-cn":186,"./ug-cn.js":186,"./uk":187,"./uk.js":187,"./ur":188,"./ur.js":188,"./uz":189,"./uz-latn":190,"./uz-latn.js":190,"./uz.js":189,"./vi":191,"./vi.js":191,"./x-pseudo":192,"./x-pseudo.js":192,"./yo":193,"./yo.js":193,"./zh-cn":194,"./zh-cn.js":194,"./zh-hk":195,"./zh-hk.js":195,"./zh-tw":196,"./zh-tw.js":196};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=295},423:function(e,t,n){var a=n(424);"string"==typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(12)(a,r);a.locals&&(e.exports=a.locals)},424:function(e,t,n){(e.exports=n(11)(!1)).push([e.i,".MainPage img {\n  width: 100%;\n}\n\n.MainPage {\n  height: 100vh;\n  min-height: 100vh;\n}\n\n.MainPage .list-item {\n  cursor: pointer;\n  transition: background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  padding-left: 10px;\n}\n\n.MainPage .list-item:hover {\n  background: #e6f7ff;\n  transition: background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n\n.MainPage .ant-layout-sider-zero-width-trigger {\n  top: calc(100vh - 65px);\n}\n",""])}}]);